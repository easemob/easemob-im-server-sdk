<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0_231) on Mon Sep 09 15:08:16 CST 2024 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>MessageApi (im-sdk-core 0.8.55 API)</title>
<meta name="date" content="2024-09-09">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="MessageApi (im-sdk-core 0.8.55 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":42,"i13":10,"i14":42,"i15":42,"i16":42,"i17":42,"i18":42,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":42,"i29":42,"i30":42,"i31":42};
var tabs = {65535:["t0","所有方法"],2:["t2","实例方法"],8:["t4","具体方法"],32:["t6","已过时的方法"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="class-use/MessageApi.html">使用</a></li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../../index-all.html">索引</a></li>
<li><a href="../../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../com/easemob/im/server/api/message/ChatroomMsgLevel.html" title="com.easemob.im.server.api.message中的枚举"><span class="typeNameLink">上一个类</span></a></li>
<li><a href="../../../../../../com/easemob/im/server/api/message/RouteType.html" title="com.easemob.im.server.api.message中的枚举"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/easemob/im/server/api/message/MessageApi.html" target="_top">框架</a></li>
<li><a href="MessageApi.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li>嵌套&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.easemob.im.server.api.message</div>
<h2 title="类 MessageApi" class="title">类 MessageApi</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="java.lang中的类或接口">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.easemob.im.server.api.message.MessageApi</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">MessageApi</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="java.lang中的类或接口">Object</a></pre>
<div class="block">消息API。</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>构造器概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="构造器概要表, 列表构造器和解释">
<caption><span>构造器</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">构造器和说明</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#MessageApi-com.easemob.im.server.api.Context-">MessageApi</a></span>(<a href="../../../../../../com/easemob/im/server/api/Context.html" title="com.easemob.im.server.api中的接口">Context</a>&nbsp;context)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>方法概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="方法概要表, 列表方法和解释">
<caption><span id="t0" class="activeTableTab"><span>所有方法</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">实例方法</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">具体方法</a></span><span class="tabEnd">&nbsp;</span></span><span id="t6" class="tableTab"><span><a href="javascript:show(32);">已过时的方法</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">方法和说明</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>reactor.core.publisher.Flux&lt;<a href="../../../../../../com/easemob/im/server/api/message/missed/MissedMessageCount.html" title="com.easemob.im.server.api.message.missed中的类">MissedMessageCount</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#countMissedMessages-java.lang.String-">countMissedMessages</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;username)</code>
<div class="block">查询用户离线消息数。</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="java.lang中的类或接口">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#deleteChannel-java.lang.String-java.lang.String-java.lang.String-java.lang.Boolean-">deleteChannel</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;username,
             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;channelName,
             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;channelType,
             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;deleteRoam)</code>
<div class="block">服务端单向删除会话。</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Path.html?is-external=true" title="java.nio.file中的类或接口">Path</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#getHistoryAsLocalFile-java.time.Instant-java.nio.file.Path-java.lang.String-">getHistoryAsLocalFile</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html?is-external=true" title="java.time中的类或接口">Instant</a>&nbsp;instant,
                     <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Path.html?is-external=true" title="java.nio.file中的类或接口">Path</a>&nbsp;dir,
                     <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;filename)</code>
<div class="block">下载消息历史文件到本地。</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#getHistoryAsUri-java.time.Instant-">getHistoryAsUri</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html?is-external=true" title="java.time中的类或接口">Instant</a>&nbsp;instant)</code>
<div class="block">获取消息历史文件的下载地址。</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#importChatGroupMessage-java.lang.String-java.lang.String-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.Boolean-java.lang.Long-java.lang.Boolean-">importChatGroupMessage</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;to,
                      <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                      <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;isAckRead,
                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="java.lang中的类或接口">Long</a>&nbsp;msgTimestamp,
                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;needDownload)</code>
<div class="block">导入群聊消息

 API使用示例：
  <code>

 例如，导入带扩展字段的文本消息

 EMTextMessage textMessage = new EMTextMessage().text("hello");

 Set&lt;EMKeyValue&gt; exts = new HashSet&lt;&gt;();
 exts.add(EMKeyValue.of("key", "value"));

 try {
     Instant time = Instant.parse("2021-05-20T18:00:00.631Z").minusMillis((TimeUnit.HOURS.toMillis(8)));
     Long msgTimestamp = time.toEpochMilli();
     String groupId = "18273849454"
     String messageId = service.message()
                               .importChatGroupMessage("fromUserName", groupId,
                                  textMessage, exts, true, msgTimestamp, false)
                               .block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }
 </code></div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#importChatMessage-java.lang.String-java.lang.String-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.Boolean-java.lang.Long-java.lang.Boolean-">importChatMessage</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;to,
                 <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
                 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;isAckRead,
                 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="java.lang中的类或接口">Long</a>&nbsp;msgTimestamp,
                 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;needDownload)</code>
<div class="block">导入单聊消息

 API使用示例：
  <code>

 例如，导入带扩展字段的文本消息

 EMTextMessage textMessage = new EMTextMessage().text("hello");

 Set&lt;EMKeyValue&gt; exts = new HashSet&lt;&gt;();
 exts.add(EMKeyValue.of("key", "value"));

 try {
     Instant time = Instant.parse("2021-05-20T18:00:00.631Z").minusMillis((TimeUnit.HOURS.toMillis(8)));
     Long msgTimestamp = time.toEpochMilli();
     String messageId = service.message()
                               .importChatMessage("fromUserName", "toUserName",
                                  textMessage, exts, true, msgTimestamp, false)
                               .block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 </code></div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../../../../../../com/easemob/im/server/api/message/upload/ImportMessage.html" title="com.easemob.im.server.api.message.upload中的类">ImportMessage</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#importMessage--">importMessage</a></span>()</code>
<div class="block">构造消息并导入。</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#isMessageDeliveredToUser-java.lang.String-java.lang.String-">isMessageDeliveredToUser</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;messageId,
                        <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toUser)</code>
<div class="block">查询某条离线消息的状态，如是否已经传达。</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="java.lang中的类或接口">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#modifyTextOrCustomMessage-java.lang.String-java.lang.String-com.easemob.im.server.api.message.modify.NewMessage-java.util.Map-java.lang.Boolean-">modifyTextOrCustomMessage</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;messageId,
                         <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;username,
                         <a href="../../../../../../com/easemob/im/server/api/message/modify/NewMessage.html" title="com.easemob.im.server.api.message.modify中的类">NewMessage</a>&nbsp;newMessage,
                         <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="java.util中的类或接口">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>,<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="java.lang中的类或接口">Object</a>&gt;&nbsp;newExt,
                         <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;isCombineExt)</code>
<div class="block">修改文本或自定义消息，若使用该功能，需联系环信商务开通。</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="java.lang中的类或接口">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#oneWayClearGroupOrRoomRoamingMessagesWithinPeriod-java.lang.String-java.lang.String-long-">oneWayClearGroupOrRoomRoamingMessagesWithinPeriod</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;username,
                                                 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;id,
                                                 long&nbsp;time)</code>
<div class="block">单向清空指定群组或聊天室会话一段时间内的漫游消息
 
 清空后，该用户无法从环信服务端拉取到这些漫游消息。</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="java.lang中的类或接口">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#oneWayClearUserAllRoamingMessage-java.lang.String-">oneWayClearUserAllRoamingMessage</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;username)</code>
<div class="block">单向清空指定用户的漫游消息
 
 清空指定用户当前时间及之前的所有漫游消息。</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="java.lang中的类或接口">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#oneWayClearUserRoamingMessagesWithinPeriod-java.lang.String-java.lang.String-long-">oneWayClearUserRoamingMessagesWithinPeriod</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;username,
                                          <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;clearUser,
                                          long&nbsp;time)</code>
<div class="block">单向清空指定单聊会话一段时间内的漫游消息
 
 清空后，该用户无法从服务端拉取到漫游消息，而且该用户的所有会话也会被清除，也拉不到会话列表。</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="java.lang中的类或接口">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#recallMessage-java.util.List-">recallMessage</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="java.util中的类或接口">List</a>&lt;<a href="../../../../../../com/easemob/im/server/api/message/recall/RecallMessageSource.html" title="com.easemob.im.server.api.message.recall中的类">RecallMessageSource</a>&gt;&nbsp;messageSources)</code>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="java.lang中的类或接口">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#recallMsg-com.easemob.im.server.api.message.recall.RecallMessageSource-">recallMsg</a></span>(<a href="../../../../../../com/easemob/im/server/api/message/recall/RecallMessageSource.html" title="com.easemob.im.server.api.message.recall中的类">RecallMessageSource</a>&nbsp;recallMessage)</code>
<div class="block">消息撤回。</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code><a href="../../../../../../com/easemob/im/server/api/message/send/SendMessage.html" title="com.easemob.im.server.api.message.send中的类">SendMessage</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#send--">send</a></span>()</code>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#send-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-">send</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
    <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions)</code>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#send-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.Boolean-">send</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
    <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;syncDevice)</code>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#send-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.String-">send</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
    <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;routeType)</code>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#send-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.String-java.lang.Boolean-">send</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
    <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;routeType,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;syncDevice)</code>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../com/easemob/im/server/api/message/send/message/MessageSend.html" title="com.easemob.im.server.api.message.send.message中的类">MessageSend</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#sendMsg--">sendMsg</a></span>()</code>
<div class="block">构造消息并发送。</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#sendMsg-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.util.Set-java.lang.Boolean-">sendMsg</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;toGroups,
       <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;toGroupUsers,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;syncDevice)</code>
<div class="block">指定群组用户发送消息，你可以向群组中指定的一个或多个成员发送消息，但单次仅支持指定一个群组。</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#sendMsg-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.util.Set-java.lang.Boolean-com.easemob.im.server.api.message.ChatroomMsgLevel-">sendMsg</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;toRooms,
       <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;toRoomUsers,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;syncDevice,
       <a href="../../../../../../com/easemob/im/server/api/message/ChatroomMsgLevel.html" title="com.easemob.im.server.api.message中的枚举">ChatroomMsgLevel</a>&nbsp;chatroomMsgLevel)</code>
<div class="block">指定聊天室用户发送消息，你可以向聊天室中指定的一个或多个成员发送消息，但单次仅支持指定一个聊天室。</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#sendMsg-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-">sendMsg</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
       <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions)</code>
<div class="block">发送消息。</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#sendMsg-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.Boolean-">sendMsg</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
       <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;syncDevice)</code>
<div class="block">发送消息。</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#sendMsg-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.String-">sendMsg</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
       <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;routeType)</code>
<div class="block">发送消息（只投递在线消息）。</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#sendMsg-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.String-java.lang.Boolean-">sendMsg</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
       <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;routeType,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;syncDevice)</code>
<div class="block">发送消息。</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#sendMsg-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.String-java.lang.Boolean-com.easemob.im.server.api.message.ChatroomMsgLevel-">sendMsg</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
       <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;routeType,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;syncDevice,
       <a href="../../../../../../com/easemob/im/server/api/message/ChatroomMsgLevel.html" title="com.easemob.im.server.api.message中的枚举">ChatroomMsgLevel</a>&nbsp;chatroomMsgLevel)</code>
<div class="block">发送消息，支持设置聊天室消息优先级。</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#sendRoomBroadcastMsg-java.lang.String-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.Boolean-com.easemob.im.server.api.message.ChatroomMsgLevel-">sendRoomBroadcastMsg</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                    <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                    <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
                    <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;syncDevice,
                    <a href="../../../../../../com/easemob/im/server/api/message/ChatroomMsgLevel.html" title="com.easemob.im.server.api.message中的枚举">ChatroomMsgLevel</a>&nbsp;chatroomMsgLevel)</code>
<div class="block">发送聊天室全局广播消息。</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageResults.html" title="com.easemob.im.server.model中的类">EMSentMessageResults</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#sendWithoutMsgId-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-">sendWithoutMsgId</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
                <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
                <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions)</code>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageResults.html" title="com.easemob.im.server.model中的类">EMSentMessageResults</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#sendWithoutMsgId-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.Boolean-">sendWithoutMsgId</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
                <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
                <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
                <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;syncDevice)</code>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageResults.html" title="com.easemob.im.server.model中的类">EMSentMessageResults</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#sendWithoutMsgId-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.String-">sendWithoutMsgId</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
                <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
                <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
                <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;routeType)</code>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageResults.html" title="com.easemob.im.server.model中的类">EMSentMessageResults</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/easemob/im/server/api/message/MessageApi.html#sendWithoutMsgId-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.String-java.lang.Boolean-">sendWithoutMsgId</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
                <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
                <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
                <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;routeType,
                <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;syncDevice)</code>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="java.lang中的类或接口">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="java.lang中的类或接口">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="java.lang中的类或接口">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="java.lang中的类或接口">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="java.lang中的类或接口">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="java.lang中的类或接口">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="java.lang中的类或接口">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="java.lang中的类或接口">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="java.lang中的类或接口">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="java.lang中的类或接口">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="java.lang中的类或接口">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="java.lang中的类或接口">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>构造器详细资料</h3>
<a name="MessageApi-com.easemob.im.server.api.Context-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MessageApi</h4>
<pre>public&nbsp;MessageApi(<a href="../../../../../../com/easemob/im/server/api/Context.html" title="com.easemob.im.server.api中的接口">Context</a>&nbsp;context)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>方法详细资料</h3>
<a name="countMissedMessages-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>countMissedMessages</h4>
<pre>public&nbsp;reactor.core.publisher.Flux&lt;<a href="../../../../../../com/easemob/im/server/api/message/missed/MissedMessageCount.html" title="com.easemob.im.server.api.message.missed中的类">MissedMessageCount</a>&gt;&nbsp;countMissedMessages(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;username)</pre>
<div class="block">查询用户离线消息数。
 <p>
 API使用示例：
 <pre> <code>
 EMService service;
 try {
     List&lt;MissedMessageCount&gt; messages = service.message().countMissedMessages("username").collectList().block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>username</code> - 用户名</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>每个对话的离线消息数</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="http://docs-im.easemob.com/im/server/ready/user#%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E7%A6%BB%E7%BA%BF%E6%B6%88%E6%81%AF%E6%95%B0">获取用户离线消息数</a></dd>
</dl>
</li>
</ul>
<a name="isMessageDeliveredToUser-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isMessageDeliveredToUser</h4>
<pre>public&nbsp;reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&gt;&nbsp;isMessageDeliveredToUser(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;messageId,
                                                                     <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toUser)</pre>
<div class="block">查询某条离线消息的状态，如是否已经传达。
 <p>
 API使用示例：
 <pre> <code>
 EMService service;
 try {
     Boolean isDelivered = service.message().isMessageDeliveredToUser("messageId", "toUser").block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>messageId</code> - 要查看对消息ID</dd>
<dd><code>toUser</code> - 消息接收方的用户名</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>是否送达或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="http://docs-im.easemob.com/im/server/ready/user#%E8%8E%B7%E5%8F%96%E6%9F%90%E6%9D%A1%E7%A6%BB%E7%BA%BF%E6%B6%88%E6%81%AF%E7%8A%B6%E6%80%81">获取某条离线消息状态</a></dd>
</dl>
</li>
</ul>
<a name="send--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>send</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html?is-external=true" title="java.lang中的类或接口">@Deprecated</a>
public&nbsp;<a href="../../../../../../com/easemob/im/server/api/message/send/SendMessage.html" title="com.easemob.im.server.api.message.send中的类">SendMessage</a>&nbsp;send()</pre>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
<div class="block">构造消息并发送。将在后续版本中移除，请使用sendMsg方法。
 <p>
 例如，向用户发送一条带有扩展字段的文本消息:
 <pre><code>
 EMService service;
 try {
     service.message().send()
                      .fromUser("alice").toUser("rabbit")
                      .text(msg -&gt; msg.text("hello"))
                      .extension(exts -&gt; exts.add(EMKeyValue.of("timeout", 1)))
                      .send()
                      .block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }
 </code></pre>

 <p>
 如果需要向一个群组或聊天室发消息，将示例中的 toUser 改成 toGroup 或 toRoom，并传入对应的群组或聊天室id
 <p>
 如果需要向多个用户或群组或聊天室发消息，将示例中的 toUser 改成 toUsers 或 toGroups 或 toRooms，并传入对应的用户或群组或聊天室id
 <p>
 将上述发送文本消息示例中的 `.text(...) `替换掉，来发送其他类型消息示例：
 <p>
 发送图片消息：<code>.image(msg -&gt; msg.uri(URI.create("http://example/image.png")).secret("secret").displayName("image.png"))</code>
 <p>
 发送语音消息：<code>.voice(msg -&gt; msg.uri(URI.create("http://example/voice.amr")).duration(3).secret("secret").displayName("voice.amr"))</code>
 <p>
 发送视频消息：<code>.video(msg -&gt; msg.uri(URI.create("http://example/video.mp4")).duration(3).secret("secret").displayName("video.mp4").thumb("http://example/videoThumbnail").thumbSecret("thumbSecret"))</code>
 <p>
 发送文件消息：<code>.file(msg -&gt; msg.uri(URI.create("http://example/file.txt")).secret("secret").displayName("file.txt"))</code>
 <p>
 发送位置消息：<code>.location(msg -&gt; msg.latitude(1.234567).longitude(1.234567).address("some where"))</code>
 <p>
 发送自定义类型消息：<code>.custom(msg -&gt; msg.customEvent("liked").customExtension("name", "forest"))</code>
 <p></div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>发送消息的构造器</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="http://docs-im.easemob.com/im/server/basics/messages">发送消息</a></dd>
</dl>
</li>
</ul>
<a name="sendMsg--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendMsg</h4>
<pre>public&nbsp;<a href="../../../../../../com/easemob/im/server/api/message/send/message/MessageSend.html" title="com.easemob.im.server.api.message.send.message中的类">MessageSend</a>&nbsp;sendMsg()</pre>
<div class="block">构造消息并发送。
 <p>
 例如，向用户发送一条带有扩展字段的文本消息:
 <pre><code>
 EMService service;
 try {
     service.message().sendMsg()
                      .fromUser("alice").toUser("rabbit")
                      .text(msg -&gt; msg.text("hello"))
                      .extension(exts -&gt; exts.add(EMKeyValue.of("timeout", 1)))
                      .send()
                      .block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }
 </code></pre>

 <p>
 如果需要向一个群组或聊天室发消息，将示例中的 toUser 改成 toGroup 或 toRoom，并传入对应的群组或聊天室id
 <p>
 如果需要向多个用户或群组或聊天室发消息，将示例中的 toUser 改成 toUsers 或 toGroups 或 toRooms，并传入对应的用户或群组或聊天室id
 <p>
 将上述发送文本消息示例中的 `.text(...) `替换掉，来发送其他类型消息示例：
 <p>
 发送图片消息：<code>.image(msg -&gt; msg.uri(URI.create("http://example/image.png")).secret("secret").displayName("image.png"))</code>
 <p>
 发送语音消息：<code>.voice(msg -&gt; msg.uri(URI.create("http://example/voice.amr")).duration(3).secret("secret").displayName("voice.amr"))</code>
 <p>
 发送视频消息：<code>.video(msg -&gt; msg.uri(URI.create("http://example/video.mp4")).duration(3).secret("secret").displayName("video.mp4").thumb("http://example/videoThumbnail").thumbSecret("thumbSecret"))</code>
 <p>
 发送文件消息：<code>.file(msg -&gt; msg.uri(URI.create("http://example/file.txt")).secret("secret").displayName("file.txt"))</code>
 <p>
 发送位置消息：<code>.location(msg -&gt; msg.latitude(1.234567).longitude(1.234567).address("some where"))</code>
 <p>
 发送自定义类型消息：<code>.custom(msg -&gt; msg.customEvent("liked").customExtension("name", "forest"))</code>
 <p></div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>发送消息的构造器</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="http://docs-im.easemob.com/im/server/basics/messages">发送消息</a></dd>
</dl>
</li>
</ul>
<a name="send-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>send</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html?is-external=true" title="java.lang中的类或接口">@Deprecated</a>
public&nbsp;reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;&nbsp;send(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
                                                                      <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions)</pre>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
<div class="block">发送消息。将在后续版本中移除，请使用sendMsg方法。
 <p>
 API使用示例：
 <pre> <code>
 EMService service;

 例如，向用户发送一条带有扩展字段的文本消息
 Set&lt;String&gt; toUsers = new HashSet&lt;&gt;();
 toUsers.add("toUserName");

 EMTextMessage textMessage = new EMTextMessage().text("hello");

 Set&lt;EMKeyValue&gt; exts = new HashSet&lt;&gt;();
 exts.add(EMKeyValue.of("key", "value"));

 try {
     EMSentMessageIds messageIds = service.message().send("fromUserName", "users", toUsers, textMessage, exts).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 例如，向群组发送一条带有扩展字段的图片消息
 Set&lt;String&gt; toGroups = new HashSet&lt;&gt;();
 toGroups.add("toGroupId");

 EMImageMessage imageMessage =
         new EMImageMessage().uri(URI.create("http://example/image.png")).secret("secret")
                 .displayName("image.png");

 Set&lt;EMKeyValue&gt; exts1 = new HashSet&lt;&gt;();
 exts1.add(EMKeyValue.of("key", "value"));
 exts1.add(EMKeyValue.of("key1", 10));
 exts1.add(EMKeyValue.of("key2", new HashMap&lt;String, String&gt;() {
     {
         put("mkey1", "mvalue1");
         put("mkey2", "mvalue2");
     }
 }));

 try {
     EMSentMessageIds messageIds = service.message().send("fromUserName", "chatgroups", toGroups, imageMessage, exts1).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>from</code> - 发送者用户名</dd>
<dd><code>toType</code> - 目标类型，可以是 `users`, `chatgroups`, `chatrooms`</dd>
<dd><code>tos</code> - 目标id列表</dd>
<dd><code>message</code> - 要发送的消息，EMTextMessage文本消息，EMImageMessage图片消息，EMVoiceMessage语音消息，
                   EMVideoMessage视频消息，EMFileMessage文件消息，EMCommandMessage透传消息，EMCustomMessage自定义类型消息，
                   各种类型消息需要自己构造</dd>
<dd><code>extensions</code> - 要发送的扩展，可以为空</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>发消息响应或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="http://docs-im.easemob.com/im/server/basics/messages">发送消息</a></dd>
</dl>
</li>
</ul>
<a name="sendMsg-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendMsg</h4>
<pre>public&nbsp;reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;&nbsp;sendMsg(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
                                                             <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions)</pre>
<div class="block">发送消息。
 <p>
 API使用示例：
 <pre> <code>
 EMService service;

 例如，向用户发送一条带有扩展字段的文本消息
 Set&lt;String&gt; toUsers = new HashSet&lt;&gt;();
 toUsers.add("toUserName");

 EMTextMessage textMessage = new EMTextMessage().text("hello");

 Set&lt;EMKeyValue&gt; exts = new HashSet&lt;&gt;();
 exts.add(EMKeyValue.of("key", "value"));

 try {
     EMSentMessageIds messageIds = service.message().sendMsg("fromUserName", "users", toUsers, textMessage, exts).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 例如，向群组发送一条带有扩展字段的图片消息
 Set&lt;String&gt; toGroups = new HashSet&lt;&gt;();
 toGroups.add("toGroupId");

 EMImageMessage imageMessage =
         new EMImageMessage().uri(URI.create("http://example/image.png")).secret("secret")
                 .displayName("image.png");

 Set&lt;EMKeyValue&gt; exts1 = new HashSet&lt;&gt;();
 exts1.add(EMKeyValue.of("key", "value"));
 exts1.add(EMKeyValue.of("key1", 10));
 exts1.add(EMKeyValue.of("key2", new HashMap&lt;String, String&gt;() {
     {
         put("mkey1", "mvalue1");
         put("mkey2", "mvalue2");
     }
 }));

 try {
     EMSentMessageIds messageIds = service.message().sendMsg("fromUserName", "chatgroups", toGroups, imageMessage, exts1).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>from</code> - 发送者用户名</dd>
<dd><code>toType</code> - 目标类型，可以是 `users`, `chatgroups`, `chatrooms`</dd>
<dd><code>tos</code> - 目标id列表</dd>
<dd><code>message</code> - 要发送的消息，EMTextMessage文本消息，EMImageMessage图片消息，EMVoiceMessage语音消息，
                   EMVideoMessage视频消息，EMFileMessage文件消息，EMCommandMessage透传消息，EMCustomMessage自定义类型消息，
                   各种类型消息需要自己构造</dd>
<dd><code>extensions</code> - 要发送的扩展，可以为空</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>发消息响应或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="http://docs-im.easemob.com/im/server/basics/messages">发送消息</a></dd>
</dl>
</li>
</ul>
<a name="sendWithoutMsgId-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendWithoutMsgId</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html?is-external=true" title="java.lang中的类或接口">@Deprecated</a>
public&nbsp;reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageResults.html" title="com.easemob.im.server.model中的类">EMSentMessageResults</a>&gt;&nbsp;sendWithoutMsgId(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
                                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
                                                                                      <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions)</pre>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
<div class="block">发送消息，不返回消息 ID。将在后续版本中移除。
 <p>
 API使用示例：
 <pre> <code>
 EMService service;

 例如，向用户发送一条带有扩展字段的文本消息
 Set&lt;String&gt; toUsers = new HashSet&lt;&gt;();
 toUsers.add("toUserName");

 EMTextMessage textMessage = new EMTextMessage().text("hello");

 Set&lt;EMKeyValue&gt; exts = new HashSet&lt;&gt;();
 exts.add(EMKeyValue.of("key", "value"));

 try {
     EMSentMessageIds messageIds = service.message().sendWithoutMsgId("fromUserName", "users", toUsers, textMessage, exts).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 例如，向群组发送一条带有扩展字段的图片消息
 Set&lt;String&gt; toGroups = new HashSet&lt;&gt;();
 toGroups.add("toGroupId");

 EMImageMessage imageMessage =
         new EMImageMessage().uri(URI.create("http://example/image.png")).secret("secret")
                 .displayName("image.png");

 Set&lt;EMKeyValue&gt; exts1 = new HashSet&lt;&gt;();
 exts1.add(EMKeyValue.of("key", "value"));
 exts1.add(EMKeyValue.of("key1", 10));
 exts1.add(EMKeyValue.of("key2", new HashMap&lt;String, String&gt;() {
     {
         put("mkey1", "mvalue1");
         put("mkey2", "mvalue2");
     }
 }));

 try {
     EMSentMessageIds messageIds = service.message().sendWithoutMsgId("fromUserName", "chatgroups", toGroups, imageMessage, exts1).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>from</code> - 发送者用户名</dd>
<dd><code>toType</code> - 目标类型，可以是 `users`, `chatgroups`, `chatrooms`</dd>
<dd><code>tos</code> - 目标id列表</dd>
<dd><code>message</code> - 要发送的消息，EMTextMessage文本消息，EMImageMessage图片消息，EMVoiceMessage语音消息，
                   EMVideoMessage视频消息，EMFileMessage文件消息，EMCommandMessage透传消息，EMCustomMessage自定义类型消息，
                   各种类型消息需要自己构造</dd>
<dd><code>extensions</code> - 要发送的扩展，可以为空</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>发消息响应或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="http://docs-im.easemob.com/im/server/basics/messages">发送消息</a></dd>
</dl>
</li>
</ul>
<a name="send-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>send</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html?is-external=true" title="java.lang中的类或接口">@Deprecated</a>
public&nbsp;reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;&nbsp;send(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
                                                                      <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;routeType)</pre>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
<div class="block">发送消息（只投递在线消息）。将在后续版本中移除，请使用sendMsg方法。
 <p>
 API使用示例：
 <pre> <code>
 EMService service;

 例如，向用户发送一条带有扩展字段的文本消息
 Set&lt;String&gt; toUsers = new HashSet&lt;&gt;();
 toUsers.add("toUserName");

 EMTextMessage textMessage = new EMTextMessage().text("hello");

 Set&lt;EMKeyValue&gt; exts = new HashSet&lt;&gt;();
 exts.add(EMKeyValue.of("key", "value"));

 try {
     EMSentMessageIds messageIds = service.message().send("fromUserName", "users", toUsers, textMessage, exts, "ROUTE_ONLINE").block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 例如，向群组发送一条带有扩展字段的图片消息
 Set&lt;String&gt; toGroups = new HashSet&lt;&gt;();
 toGroups.add("toGroupId");

 EMImageMessage imageMessage =
         new EMImageMessage().uri(URI.create("http://example/image.png")).secret("secret")
                 .displayName("image.png");

 Set&lt;EMKeyValue&gt; exts1 = new HashSet&lt;&gt;();
 exts1.add(EMKeyValue.of("key", "value"));
 exts1.add(EMKeyValue.of("key1", 10));
 exts1.add(EMKeyValue.of("key2", new HashMap&lt;String, String&gt;() {
     {
         put("mkey1", "mvalue1");
         put("mkey2", "mvalue2");
     }
 }));

 try {
     EMSentMessageIds messageIds = service.message().send("fromUserName", "chatgroups", toGroups, imageMessage, exts1, "ROUTE_ONLINE").block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>from</code> - 发送者用户名</dd>
<dd><code>toType</code> - 目标类型，可以是 `users`, `chatgroups`, `chatrooms`</dd>
<dd><code>tos</code> - 目标id列表</dd>
<dd><code>message</code> - 要发送的消息</dd>
<dd><code>extensions</code> - 要发送的扩展，可以为空</dd>
<dd><code>routeType</code> - 只投递在线消息，请传入 `ROUTE_ONLINE`</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>发消息响应或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="http://docs-im.easemob.com/im/server/basics/messages">发送消息</a></dd>
</dl>
</li>
</ul>
<a name="sendMsg-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendMsg</h4>
<pre>public&nbsp;reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;&nbsp;sendMsg(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
                                                             <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;routeType)</pre>
<div class="block">发送消息（只投递在线消息）。
 <p>
 API使用示例：
 <pre> <code>
 EMService service;

 例如，向用户发送一条带有扩展字段的文本消息
 Set&lt;String&gt; toUsers = new HashSet&lt;&gt;();
 toUsers.add("toUserName");

 EMTextMessage textMessage = new EMTextMessage().text("hello");

 Set&lt;EMKeyValue&gt; exts = new HashSet&lt;&gt;();
 exts.add(EMKeyValue.of("key", "value"));

 try {
     EMSentMessageIds messageIds = service.message().sendMsg("fromUserName", "users", toUsers, textMessage, exts, "ROUTE_ONLINE").block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 例如，向群组发送一条带有扩展字段的图片消息
 Set&lt;String&gt; toGroups = new HashSet&lt;&gt;();
 toGroups.add("toGroupId");

 EMImageMessage imageMessage =
         new EMImageMessage().uri(URI.create("http://example/image.png")).secret("secret")
                 .displayName("image.png");

 Set&lt;EMKeyValue&gt; exts1 = new HashSet&lt;&gt;();
 exts1.add(EMKeyValue.of("key", "value"));
 exts1.add(EMKeyValue.of("key1", 10));
 exts1.add(EMKeyValue.of("key2", new HashMap&lt;String, String&gt;() {
     {
         put("mkey1", "mvalue1");
         put("mkey2", "mvalue2");
     }
 }));

 try {
     EMSentMessageIds messageIds = service.message().sendMsg("fromUserName", "chatgroups", toGroups, imageMessage, exts1, "ROUTE_ONLINE").block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>from</code> - 发送者用户名</dd>
<dd><code>toType</code> - 目标类型，可以是 `users`, `chatgroups`, `chatrooms`</dd>
<dd><code>tos</code> - 目标id列表</dd>
<dd><code>message</code> - 要发送的消息</dd>
<dd><code>extensions</code> - 要发送的扩展，可以为空</dd>
<dd><code>routeType</code> - 只投递在线消息，请传入 `ROUTE_ONLINE`</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>发消息响应或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="http://docs-im.easemob.com/im/server/basics/messages">发送消息</a></dd>
</dl>
</li>
</ul>
<a name="sendMsg-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.util.Set-java.lang.Boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendMsg</h4>
<pre>public&nbsp;reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;&nbsp;sendMsg(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;toGroups,
                                                             <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;toGroupUsers,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;syncDevice)</pre>
<div class="block">指定群组用户发送消息，你可以向群组中指定的一个或多个成员发送消息，但单次仅支持指定一个群组。
 对于定向消息，只有作为接收方的指定成员才能看到消息，其他群成员则看不到该消息。

 <p>
 API使用示例：
 <pre> <code>
 EMService service;

 例如，向指定群组用户发送一条带有扩展字段的文本消息
 Set&lt;String&gt; toGroups = new HashSet&lt;&gt;();
 toGroups.add("toGroupId");

 Set&lt;String&gt; toGroupUsers = new HashSet&lt;&gt;();
 toGroupUsers.add("toUserName");

 EMTextMessage textMessage = new EMTextMessage().text("hello");

 Set&lt;EMKeyValue&gt; exts = new HashSet&lt;&gt;();
 exts.add(EMKeyValue.of("key", "value"));

 try {
     EMSentMessageIds messageIds = service.message().sendMsg("fromUserName", toGroups, textMessage, toGroupUsers, exts, true).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>from</code> - 发送者用户名</dd>
<dd><code>toGroups</code> - 消息接收方所属的群组 ID。目前每次只能传 1 个群组 ID。</dd>
<dd><code>message</code> - 要发送的消息</dd>
<dd><code>toGroupUsers</code> - 接收消息的群成员的用户 ID 数组。每次最多可传 20 个用户 ID。</dd>
<dd><code>extensions</code> - 要发送的扩展，可以为空</dd>
<dd><code>syncDevice</code> - 消息发送成功后，是否将消息同步到发送方，true：是同步给发送方，false：是不同给发送方</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>发消息响应或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="https://docs-im-beta.easemob.com/document/server-side/message_group.html#%E5%8F%91%E9%80%81%E5%AE%9A%E5%90%91%E6%B6%88%E6%81%AF">发送定向消息</a></dd>
</dl>
</li>
</ul>
<a name="sendMsg-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.util.Set-java.lang.Boolean-com.easemob.im.server.api.message.ChatroomMsgLevel-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendMsg</h4>
<pre>public&nbsp;reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;&nbsp;sendMsg(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;toRooms,
                                                             <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;toRoomUsers,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;syncDevice,
                                                             <a href="../../../../../../com/easemob/im/server/api/message/ChatroomMsgLevel.html" title="com.easemob.im.server.api.message中的枚举">ChatroomMsgLevel</a>&nbsp;chatroomMsgLevel)</pre>
<div class="block">指定聊天室用户发送消息，你可以向聊天室中指定的一个或多个成员发送消息，但单次仅支持指定一个聊天室。
 对于定向消息，只有作为接收方的指定成员才能看到消息，其他聊天室成员则看不到该消息。

 <p>
 API使用示例：
 <pre> <code>
 EMService service;

 例如，向指定聊天室用户发送一条带有扩展字段的文本消息
 Set&lt;String&gt; toRooms = new HashSet&lt;&gt;();
 toRooms.add("toRoomId");

 Set&lt;String&gt; toRoomUsers = new HashSet&lt;&gt;();
 toRoomUsers.add("toUserName");

 EMTextMessage textMessage = new EMTextMessage().text("hello");

 Set&lt;EMKeyValue&gt; exts = new HashSet&lt;&gt;();
 exts.add(EMKeyValue.of("key", "value"));

 try {
     EMSentMessageIds messageIds = service.message().sendMsg("fromUserName", toRooms, textMessage, toRoomUsers, exts, true, ChatroomMsgLevel.NORMAL).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>from</code> - 发送者用户名</dd>
<dd><code>toRooms</code> - 消息接收方所属的聊天室 ID。目前每次只能传 1 个聊天室 ID。</dd>
<dd><code>message</code> - 要发送的消息</dd>
<dd><code>toRoomUsers</code> - 接收消息的聊天室成员的用户 ID 数组。每次最多可传 20 个用户 ID。</dd>
<dd><code>extensions</code> - 要发送的扩展，可以为空</dd>
<dd><code>syncDevice</code> - 消息发送成功后，是否将消息同步到发送方，true：是同步给发送方，false：是不同给发送方</dd>
<dd><code>chatroomMsgLevel</code> - 聊天室消息优先级: LOW-低优先级，NORMAL-普通优先级，HIGH-高优先级</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>发消息响应或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="http://docs-im-beta.easemob.com/document/server-side/message_chatroom.html#%E5%8F%91%E9%80%81%E5%AE%9A%E5%90%91%E6%B6%88%E6%81%AF">发送定向消息</a></dd>
</dl>
</li>
</ul>
<a name="sendWithoutMsgId-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendWithoutMsgId</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html?is-external=true" title="java.lang中的类或接口">@Deprecated</a>
public&nbsp;reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageResults.html" title="com.easemob.im.server.model中的类">EMSentMessageResults</a>&gt;&nbsp;sendWithoutMsgId(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
                                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
                                                                                      <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
                                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;routeType)</pre>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
<div class="block">发送消息（只投递在线消息），不返回消息 ID。将在后续版本中移除。
 <p>
 API使用示例：
 <pre> <code>
 EMService service;

 例如，向用户发送一条带有扩展字段的文本消息
 Set&lt;String&gt; toUsers = new HashSet&lt;&gt;();
 toUsers.add("toUserName");

 EMTextMessage textMessage = new EMTextMessage().text("hello");

 Set&lt;EMKeyValue&gt; exts = new HashSet&lt;&gt;();
 exts.add(EMKeyValue.of("key", "value"));

 try {
     EMSentMessageResults messageResults = service.message().send("fromUserName", "users", toUsers, textMessage, exts, "ROUTE_ONLINE").block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 例如，向群组发送一条带有扩展字段的图片消息
 Set&lt;String&gt; toGroups = new HashSet&lt;&gt;();
 toGroups.add("toGroupId");

 EMImageMessage imageMessage =
         new EMImageMessage().uri(URI.create("http://example/image.png")).secret("secret")
                 .displayName("image.png");

 Set&lt;EMKeyValue&gt; exts1 = new HashSet&lt;&gt;();
 exts1.add(EMKeyValue.of("key", "value"));
 exts1.add(EMKeyValue.of("key1", 10));
 exts1.add(EMKeyValue.of("key2", new HashMap&lt;String, String&gt;() {
     {
         put("mkey1", "mvalue1");
         put("mkey2", "mvalue2");
     }
 }));

 try {
     EMSentMessageResults messageResults = service.message().send("fromUserName", "chatgroups", toGroups, imageMessage, exts1, "ROUTE_ONLINE").block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>from</code> - 发送者用户名</dd>
<dd><code>toType</code> - 目标类型，可以是 `users`, `chatgroups`, `chatrooms`</dd>
<dd><code>tos</code> - 目标id列表</dd>
<dd><code>message</code> - 要发送的消息</dd>
<dd><code>extensions</code> - 要发送的扩展，可以为空</dd>
<dd><code>routeType</code> - 只投递在线消息，请传入 `ROUTE_ONLINE`</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>发消息响应或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="http://docs-im.easemob.com/im/server/basics/messages">发送消息</a></dd>
</dl>
</li>
</ul>
<a name="send-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.Boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>send</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html?is-external=true" title="java.lang中的类或接口">@Deprecated</a>
public&nbsp;reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;&nbsp;send(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
                                                                      <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;syncDevice)</pre>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
<div class="block">发送消息。将在后续版本中移除，请使用sendMsg方法。
 <p>
 API使用示例：
 <pre> <code>
 EMService service;

 例如，向用户发送一条带有扩展字段的文本消息
 Set&lt;String&gt; toUsers = new HashSet&lt;&gt;();
 toUsers.add("toUserName");

 EMTextMessage textMessage = new EMTextMessage().text("hello");

 Set&lt;EMKeyValue&gt; exts = new HashSet&lt;&gt;();
 exts.add(EMKeyValue.of("key", "value"));

 try {
     EMSentMessageIds messageIds = service.message().send("fromUserName", "users", toUsers, textMessage, exts, true).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 例如，向群组发送一条带有扩展字段的图片消息
 Set&lt;String&gt; toGroups = new HashSet&lt;&gt;();
 toGroups.add("toGroupId");

 EMImageMessage imageMessage =
         new EMImageMessage().uri(URI.create("http://example/image.png")).secret("secret")
                 .displayName("image.png");

 Set&lt;EMKeyValue&gt; exts1 = new HashSet&lt;&gt;();
 exts1.add(EMKeyValue.of("key", "value"));
 exts1.add(EMKeyValue.of("key1", 10));
 exts1.add(EMKeyValue.of("key2", new HashMap&lt;String, String&gt;() {
     {
         put("mkey1", "mvalue1");
         put("mkey2", "mvalue2");
     }
 }));

 try {
     EMSentMessageIds messageIds = service.message().send("fromUserName", "chatgroups", toGroups, imageMessage, exts1, true).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>from</code> - 发送者用户名</dd>
<dd><code>toType</code> - 目标类型，可以是 `users`, `chatgroups`, `chatrooms`</dd>
<dd><code>tos</code> - 目标id列表</dd>
<dd><code>message</code> - 要发送的消息</dd>
<dd><code>extensions</code> - 要发送的扩展，可以为空</dd>
<dd><code>syncDevice</code> - 消息发送成功后，是否将消息同步到发送方，true：是同步给发送方，false：是不同给发送方</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>发消息响应或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="http://docs-im.easemob.com/im/server/basics/messages">发送消息</a></dd>
</dl>
</li>
</ul>
<a name="sendMsg-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.Boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendMsg</h4>
<pre>public&nbsp;reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;&nbsp;sendMsg(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
                                                             <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;syncDevice)</pre>
<div class="block">发送消息。
 <p>
 API使用示例：
 <pre> <code>
 EMService service;

 例如，向用户发送一条带有扩展字段的文本消息
 Set&lt;String&gt; toUsers = new HashSet&lt;&gt;();
 toUsers.add("toUserName");

 EMTextMessage textMessage = new EMTextMessage().text("hello");

 Set&lt;EMKeyValue&gt; exts = new HashSet&lt;&gt;();
 exts.add(EMKeyValue.of("key", "value"));

 try {
     EMSentMessageIds messageIds = service.message().sendMsg("fromUserName", "users", toUsers, textMessage, exts, true).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 例如，向群组发送一条带有扩展字段的图片消息
 Set&lt;String&gt; toGroups = new HashSet&lt;&gt;();
 toGroups.add("toGroupId");

 EMImageMessage imageMessage =
         new EMImageMessage().uri(URI.create("http://example/image.png")).secret("secret")
                 .displayName("image.png");

 Set&lt;EMKeyValue&gt; exts1 = new HashSet&lt;&gt;();
 exts1.add(EMKeyValue.of("key", "value"));
 exts1.add(EMKeyValue.of("key1", 10));
 exts1.add(EMKeyValue.of("key2", new HashMap&lt;String, String&gt;() {
     {
         put("mkey1", "mvalue1");
         put("mkey2", "mvalue2");
     }
 }));

 try {
     EMSentMessageIds messageIds = service.message().sendMsg("fromUserName", "chatgroups", toGroups, imageMessage, exts1, true).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>from</code> - 发送者用户名</dd>
<dd><code>toType</code> - 目标类型，可以是 `users`, `chatgroups`, `chatrooms`</dd>
<dd><code>tos</code> - 目标id列表</dd>
<dd><code>message</code> - 要发送的消息</dd>
<dd><code>extensions</code> - 要发送的扩展，可以为空</dd>
<dd><code>syncDevice</code> - 消息发送成功后，是否将消息同步到发送方，true：是同步给发送方，false：是不同给发送方</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>发消息响应或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="http://docs-im.easemob.com/im/server/basics/messages">发送消息</a></dd>
</dl>
</li>
</ul>
<a name="sendWithoutMsgId-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.Boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendWithoutMsgId</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html?is-external=true" title="java.lang中的类或接口">@Deprecated</a>
public&nbsp;reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageResults.html" title="com.easemob.im.server.model中的类">EMSentMessageResults</a>&gt;&nbsp;sendWithoutMsgId(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
                                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
                                                                                      <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
                                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;syncDevice)</pre>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
<div class="block">发送消息，不返回消息 ID。将在后续版本中移除。
 <p>
 API使用示例：
 <pre> <code>
 EMService service;

 例如，向用户发送一条带有扩展字段的文本消息
 Set&lt;String&gt; toUsers = new HashSet&lt;&gt;();
 toUsers.add("toUserName");

 EMTextMessage textMessage = new EMTextMessage().text("hello");

 Set&lt;EMKeyValue&gt; exts = new HashSet&lt;&gt;();
 exts.add(EMKeyValue.of("key", "value"));

 try {
     EMSentMessageResults messageResults = service.message().sendWithoutMsgId("fromUserName", "users", toUsers, textMessage, exts, true).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 例如，向群组发送一条带有扩展字段的图片消息
 Set&lt;String&gt; toGroups = new HashSet&lt;&gt;();
 toGroups.add("toGroupId");

 EMImageMessage imageMessage =
         new EMImageMessage().uri(URI.create("http://example/image.png")).secret("secret")
                 .displayName("image.png");

 Set&lt;EMKeyValue&gt; exts1 = new HashSet&lt;&gt;();
 exts1.add(EMKeyValue.of("key", "value"));
 exts1.add(EMKeyValue.of("key1", 10));
 exts1.add(EMKeyValue.of("key2", new HashMap&lt;String, String&gt;() {
     {
         put("mkey1", "mvalue1");
         put("mkey2", "mvalue2");
     }
 }));

 try {
     EMSentMessageResults messageResults = service.message().sendWithoutMsgId("fromUserName", "chatgroups", toGroups, imageMessage, exts1, true).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>from</code> - 发送者用户名</dd>
<dd><code>toType</code> - 目标类型，可以是 `users`, `chatgroups`, `chatrooms`</dd>
<dd><code>tos</code> - 目标id列表</dd>
<dd><code>message</code> - 要发送的消息</dd>
<dd><code>extensions</code> - 要发送的扩展，可以为空</dd>
<dd><code>syncDevice</code> - 消息发送成功后，是否将消息同步到发送方，true：是同步给发送方，false：是不同给发送方</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>发消息响应或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="http://docs-im.easemob.com/im/server/basics/messages">发送消息</a></dd>
</dl>
</li>
</ul>
<a name="send-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.String-java.lang.Boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>send</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html?is-external=true" title="java.lang中的类或接口">@Deprecated</a>
public&nbsp;reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;&nbsp;send(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
                                                                      <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;routeType,
                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;syncDevice)</pre>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
<div class="block">发送消息。将在后续版本中移除，请使用sendMsg方法。
 <p>
 API使用示例：
 <pre> <code>
 EMService service;

 例如，向用户发送一条带有扩展字段的文本消息
 Set&lt;String&gt; toUsers = new HashSet&lt;&gt;();
 toUsers.add("toUserName");

 EMTextMessage textMessage = new EMTextMessage().text("hello");

 Set&lt;EMKeyValue&gt; exts = new HashSet&lt;&gt;();
 exts.add(EMKeyValue.of("key", "value"));

 try {
     EMSentMessageIds messageIds = service.message().send("fromUserName", "users", toUsers, textMessage, exts, "ROUTE_ONLINE", true).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 例如，向群组发送一条带有扩展字段的图片消息
 Set&lt;String&gt; toGroups = new HashSet&lt;&gt;();
 toGroups.add("toGroupId");

 EMImageMessage imageMessage =
         new EMImageMessage().uri(URI.create("http://example/image.png")).secret("secret")
                 .displayName("image.png");

 Set&lt;EMKeyValue&gt; exts1 = new HashSet&lt;&gt;();
 exts1.add(EMKeyValue.of("key", "value"));
 exts1.add(EMKeyValue.of("key1", 10));
 exts1.add(EMKeyValue.of("key2", new HashMap&lt;String, String&gt;() {
     {
         put("mkey1", "mvalue1");
         put("mkey2", "mvalue2");
     }
 }));

 try {
     EMSentMessageIds messageIds = service.message().send("fromUserName", "chatgroups", toGroups, imageMessage, exts1, "ROUTE_ONLINE", true).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>from</code> - 发送者用户名</dd>
<dd><code>toType</code> - 目标类型，可以是 `users`, `chatgroups`, `chatrooms`</dd>
<dd><code>tos</code> - 目标id列表</dd>
<dd><code>message</code> - 要发送的消息</dd>
<dd><code>extensions</code> - 要发送的扩展，可以为空</dd>
<dd><code>routeType</code> - 只投递在线消息，请传入 `ROUTE_ONLINE`</dd>
<dd><code>syncDevice</code> - 消息发送成功后，是否将消息同步到发送方，true：是同步给发送方，false：是不同给发送方</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>发消息响应或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="http://docs-im.easemob.com/im/server/basics/messages">发送消息</a></dd>
</dl>
</li>
</ul>
<a name="sendMsg-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.String-java.lang.Boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendMsg</h4>
<pre>public&nbsp;reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;&nbsp;sendMsg(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
                                                             <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;routeType,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;syncDevice)</pre>
<div class="block">发送消息。
 <p>
 API使用示例：
 <pre> <code>
 EMService service;

 例如，向用户发送一条带有扩展字段的文本消息
 Set&lt;String&gt; toUsers = new HashSet&lt;&gt;();
 toUsers.add("toUserName");

 EMTextMessage textMessage = new EMTextMessage().text("hello");

 Set&lt;EMKeyValue&gt; exts = new HashSet&lt;&gt;();
 exts.add(EMKeyValue.of("key", "value"));

 try {
     EMSentMessageIds messageIds = service.message().sendMsg("fromUserName", "users", toUsers, textMessage, exts, "ROUTE_ONLINE", true).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 例如，向群组发送一条带有扩展字段的图片消息
 Set&lt;String&gt; toGroups = new HashSet&lt;&gt;();
 toGroups.add("toGroupId");

 EMImageMessage imageMessage =
         new EMImageMessage().uri(URI.create("http://example/image.png")).secret("secret")
                 .displayName("image.png");

 Set&lt;EMKeyValue&gt; exts1 = new HashSet&lt;&gt;();
 exts1.add(EMKeyValue.of("key", "value"));
 exts1.add(EMKeyValue.of("key1", 10));
 exts1.add(EMKeyValue.of("key2", new HashMap&lt;String, String&gt;() {
     {
         put("mkey1", "mvalue1");
         put("mkey2", "mvalue2");
     }
 }));

 try {
     EMSentMessageIds messageIds = service.message().sendMsg("fromUserName", "chatgroups", toGroups, imageMessage, exts1, "ROUTE_ONLINE", true).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>from</code> - 发送者用户名</dd>
<dd><code>toType</code> - 目标类型，可以是 `users`, `chatgroups`, `chatrooms`</dd>
<dd><code>tos</code> - 目标id列表</dd>
<dd><code>message</code> - 要发送的消息</dd>
<dd><code>extensions</code> - 要发送的扩展，可以为空</dd>
<dd><code>routeType</code> - 只投递在线消息，请传入 `ROUTE_ONLINE`</dd>
<dd><code>syncDevice</code> - 消息发送成功后，是否将消息同步到发送方，true：是同步给发送方，false：是不同给发送方</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>发消息响应或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="http://docs-im.easemob.com/im/server/basics/messages">发送消息</a></dd>
</dl>
</li>
</ul>
<a name="sendMsg-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.String-java.lang.Boolean-com.easemob.im.server.api.message.ChatroomMsgLevel-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendMsg</h4>
<pre>public&nbsp;reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;&nbsp;sendMsg(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
                                                             <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;routeType,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;syncDevice,
                                                             <a href="../../../../../../com/easemob/im/server/api/message/ChatroomMsgLevel.html" title="com.easemob.im.server.api.message中的枚举">ChatroomMsgLevel</a>&nbsp;chatroomMsgLevel)</pre>
<div class="block">发送消息，支持设置聊天室消息优先级。
 <p>
 API使用示例：
 <pre> <code>
 EMService service;

 例如，向聊天室发送一条带有扩展字段的图片消息
 Set&lt;String&gt; toChatRooms = new HashSet&lt;&gt;();
 toChatRooms.add("toChatroomId");

 EMImageMessage imageMessage =
         new EMImageMessage().uri(URI.create("http://example/image.png")).secret("secret")
                 .displayName("image.png");

 Set&lt;EMKeyValue&gt; exts = new HashSet&lt;&gt;();
 exts.add(EMKeyValue.of("key", "value"));
 exts.add(EMKeyValue.of("key1", 10));
 exts.add(EMKeyValue.of("key2", new HashMap&lt;String, String&gt;() {
     {
         put("mkey1", "mvalue1");
         put("mkey2", "mvalue2");
     }
 }));

 try {
     EMSentMessageIds messageIds = service.message().sendMsg("fromUserName", "chatrooms", toChatRooms, imageMessage, exts, "ROUTE_ONLINE", true, ChatroomMsgLevel.NORMAL).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>from</code> - 发送者用户名</dd>
<dd><code>toType</code> - 目标类型，可以是 `users`, `chatgroups`, `chatrooms`</dd>
<dd><code>tos</code> - 目标id列表</dd>
<dd><code>message</code> - 要发送的消息</dd>
<dd><code>extensions</code> - 要发送的扩展，可以为空</dd>
<dd><code>routeType</code> - 只投递在线消息，请传入 `ROUTE_ONLINE`</dd>
<dd><code>syncDevice</code> - 消息发送成功后，是否将消息同步到发送方，true：是同步给发送方，false：是不同给发送方</dd>
<dd><code>chatroomMsgLevel</code> - 聊天室消息优先级: LOW-低优先级，NORMAL-普通优先级，HIGH-高优先级</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>发消息响应或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="http://docs-im.easemob.com/im/server/basics/messages">发送消息</a></dd>
</dl>
</li>
</ul>
<a name="sendRoomBroadcastMsg-java.lang.String-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.Boolean-com.easemob.im.server.api.message.ChatroomMsgLevel-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendRoomBroadcastMsg</h4>
<pre>public&nbsp;reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageIds.html" title="com.easemob.im.server.model中的类">EMSentMessageIds</a>&gt;&nbsp;sendRoomBroadcastMsg(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                                                                          <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                                                                          <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
                                                                          <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;syncDevice,
                                                                          <a href="../../../../../../com/easemob/im/server/api/message/ChatroomMsgLevel.html" title="com.easemob.im.server.api.message中的枚举">ChatroomMsgLevel</a>&nbsp;chatroomMsgLevel)</pre>
<div class="block">发送聊天室全局广播消息。
 可通过该接口向 app 下的所有活跃聊天室（聊天室至少存在一个成员，而且曾经至少发送过一条消息）发送广播消息，支持所有消息类型。
 发送频率：每分钟最多可发 10 次，而且每天最多可发 100 次广播消息。
 <p>
 API使用示例：
 <pre> <code>
 EMService service;

 例如，发送一条带有扩展字段的文本消息
 EMTextMessage textMessage = new EMTextMessage().text("hello");

 Set&lt;EMKeyValue&gt; exts = new HashSet&lt;&gt;();
 exts.add(EMKeyValue.of("key", "value"));

 try {
     EMSentMessageIds messageIds = service.message().sendRoomBroadcastMsg("fromUserName", textMessage, exts, true, ChatroomMsgLevel.NORMAL).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>from</code> - 发送者用户名</dd>
<dd><code>message</code> - 要发送的消息</dd>
<dd><code>extensions</code> - 要发送的扩展，可以为空</dd>
<dd><code>syncDevice</code> - 消息发送成功后，是否将消息同步到发送方，true：是同步给发送方，false：是不同给发送方</dd>
<dd><code>chatroomMsgLevel</code> - 聊天室消息优先级: LOW-低优先级，NORMAL-普通优先级，HIGH-高优先级</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>发消息响应或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="https://docs-im-beta.easemob.com/document/server-side/message_chatroom.html#%E5%8F%91%E9%80%81%E8%81%8A%E5%A4%A9%E5%AE%A4%E5%85%A8%E5%B1%80%E5%B9%BF%E6%92%AD%E6%B6%88%E6%81%AF">发送聊天室全局广播消息</a></dd>
</dl>
</li>
</ul>
<a name="sendWithoutMsgId-java.lang.String-java.lang.String-java.util.Set-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.String-java.lang.Boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendWithoutMsgId</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html?is-external=true" title="java.lang中的类或接口">@Deprecated</a>
public&nbsp;reactor.core.publisher.Mono&lt;<a href="../../../../../../com/easemob/im/server/model/EMSentMessageResults.html" title="com.easemob.im.server.model中的类">EMSentMessageResults</a>&gt;&nbsp;sendWithoutMsgId(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;toType,
                                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;tos,
                                                                                      <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
                                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;routeType,
                                                                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;syncDevice)</pre>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
<div class="block">发送消息，不返回消息 ID。将在后续版本中移除。
 <p>
 API使用示例：
 <pre> <code>
 EMService service;

 例如，向用户发送一条带有扩展字段的文本消息
 Set&lt;String&gt; toUsers = new HashSet&lt;&gt;();
 toUsers.add("toUserName");

 EMTextMessage textMessage = new EMTextMessage().text("hello");

 Set&lt;EMKeyValue&gt; exts = new HashSet&lt;&gt;();
 exts.add(EMKeyValue.of("key", "value"));

 try {
     EMSentMessageResults messageResults = service.message().sendWithoutMsgId("fromUserName", "users", toUsers, textMessage, exts, true).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 例如，向群组发送一条带有扩展字段的图片消息
 Set&lt;String&gt; toGroups = new HashSet&lt;&gt;();
 toGroups.add("toGroupId");

 EMImageMessage imageMessage =
         new EMImageMessage().uri(URI.create("http://example/image.png")).secret("secret")
                 .displayName("image.png");

 Set&lt;EMKeyValue&gt; exts1 = new HashSet&lt;&gt;();
 exts1.add(EMKeyValue.of("key", "value"));
 exts1.add(EMKeyValue.of("key1", 10));
 exts1.add(EMKeyValue.of("key2", new HashMap&lt;String, String&gt;() {
     {
         put("mkey1", "mvalue1");
         put("mkey2", "mvalue2");
     }
 }));

 try {
     EMSentMessageResults messageResults = service.message().sendWithoutMsgId("fromUserName", "chatgroups", toGroups, imageMessage, exts1, "ROUTE_ONLINE", true).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>from</code> - 发送者用户名</dd>
<dd><code>toType</code> - 目标类型，可以是 `users`, `chatgroups`, `chatrooms`</dd>
<dd><code>tos</code> - 目标id列表</dd>
<dd><code>message</code> - 要发送的消息</dd>
<dd><code>extensions</code> - 要发送的扩展，可以为空</dd>
<dd><code>routeType</code> - 只投递在线消息，请传入 `ROUTE_ONLINE`</dd>
<dd><code>syncDevice</code> - 消息发送成功后，是否将消息同步到发送方，true：是同步给发送方，false：是不同给发送方</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>发消息响应或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="http://docs-im.easemob.com/im/server/basics/messages">发送消息</a></dd>
</dl>
</li>
</ul>
<a name="getHistoryAsUri-java.time.Instant-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHistoryAsUri</h4>
<pre>public&nbsp;reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;getHistoryAsUri(<a href="https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html?is-external=true" title="java.time中的类或接口">Instant</a>&nbsp;instant)</pre>
<div class="block">获取消息历史文件的下载地址。
 <p>
 历史文件是每小时一个文件，比如指定12:10，则返回12点的历史文件。
 <p>
 API使用示例：
 <pre> <code>
 EMService service;
 try {
     Instant now = Instant.parse("2021-05-20T18:00:00.631Z").minusMillis((TimeUnit.HOURS.toMillis(8)));
     String historyUrl = service.message().getHistoryAsUri(now).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>instant</code> - 时间点</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>下载地址或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="http://docs-im.easemob.com/im/server/basics/chatrecord#%E8%8E%B7%E5%8F%96%E5%8E%86%E5%8F%B2%E6%B6%88%E6%81%AF%E6%96%87%E4%BB%B6">获取历史消息文件</a></dd>
</dl>
</li>
</ul>
<a name="getHistoryAsLocalFile-java.time.Instant-java.nio.file.Path-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHistoryAsLocalFile</h4>
<pre>public&nbsp;reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Path.html?is-external=true" title="java.nio.file中的类或接口">Path</a>&gt;&nbsp;getHistoryAsLocalFile(<a href="https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html?is-external=true" title="java.time中的类或接口">Instant</a>&nbsp;instant,
                                                               <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Path.html?is-external=true" title="java.nio.file中的类或接口">Path</a>&nbsp;dir,
                                                               <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;filename)</pre>
<div class="block">下载消息历史文件到本地。
 <p>
 消息历史文件是gz压缩的。
 <p>

 API使用示例：
 <pre> <code>
 EMService service;
 Instant now = Instant.parse("2021-05-20T18:00:00.631Z").minusMillis((TimeUnit.HOURS.toMillis(8)));
 Path dir = Paths.get("/local/path/...");
 try {
     Path path = service.message().getHistoryAsLocalFile(now, dir, "filename.gz").block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>instant</code> - 时间点</dd>
<dd><code>dir</code> - 下载目录</dd>
<dd><code>filename</code> - 文件名，如果为空，则默认为YYYYMMDD.gz</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>下载文件的路径或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="http://docs-im.easemob.com/im/server/basics/chatrecord#%E8%8E%B7%E5%8F%96%E5%8E%86%E5%8F%B2%E6%B6%88%E6%81%AF%E6%96%87%E4%BB%B6">获取历史消息文件</a></dd>
</dl>
</li>
</ul>
<a name="recallMessage-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recallMessage</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html?is-external=true" title="java.lang中的类或接口">@Deprecated</a>
public&nbsp;reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="java.lang中的类或接口">Void</a>&gt;&nbsp;recallMessage(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="java.util中的类或接口">List</a>&lt;<a href="../../../../../../com/easemob/im/server/api/message/recall/RecallMessageSource.html" title="com.easemob.im.server.api.message.recall中的类">RecallMessageSource</a>&gt;&nbsp;messageSources)</pre>
<div class="block"><span class="deprecatedLabel">已过时。</span>&nbsp;</div>
<div class="block">消息撤回。将在后续版本中移除，请使用recallMsg方法。
 <p>
 API使用示例：
 <pre> <code>
 EMService service;
 try {
     List&lt;RecallMessageSource&gt; messageSources = new ArrayList&lt;&gt;();
     messageSources.add(new RecallMessageSource("messageId", "chat", "u1", "u2", true));
     service.message().recallMessage(messageSources).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>messageSources</code> - messageSources</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>消息撤回响应或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="https://docs-im.easemob.com/ccim/rest/message#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B6%88%E6%81%AF%E6%92%A4%E5%9B%9E">发送消息</a></dd>
</dl>
</li>
</ul>
<a name="recallMsg-com.easemob.im.server.api.message.recall.RecallMessageSource-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recallMsg</h4>
<pre>public&nbsp;reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="java.lang中的类或接口">Void</a>&gt;&nbsp;recallMsg(<a href="../../../../../../com/easemob/im/server/api/message/recall/RecallMessageSource.html" title="com.easemob.im.server.api.message.recall中的类">RecallMessageSource</a>&nbsp;recallMessage)</pre>
<div class="block">消息撤回。
 <p>
 API使用示例：
 <pre> <code>
 EMService service;
 try {
     RecallMessageSource recallMessage = new RecallMessageSource("messageId", "chat", "u1", "u2", true);
     service.message().recallMessage(recallMessage).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>recallMessage</code> - recallMessage</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>消息撤回响应或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="https://docs-im.easemob.com/ccim/rest/message#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B6%88%E6%81%AF%E6%92%A4%E5%9B%9E">发送消息</a></dd>
</dl>
</li>
</ul>
<a name="deleteChannel-java.lang.String-java.lang.String-java.lang.String-java.lang.Boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteChannel</h4>
<pre>public&nbsp;reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="java.lang中的类或接口">Void</a>&gt;&nbsp;deleteChannel(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;username,
                                                       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;channelName,
                                                       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;channelType,
                                                       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;deleteRoam)</pre>
<div class="block">服务端单向删除会话。
 <p>
 API使用示例：
 <pre> <code>
 EMService service;
 try {
     service.message().deleteChannel("u1", "u2", "chat", false).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>username</code> - username 删除会话方，例如 A 要将与 B 的单聊会话删除，username 为 A，channelName 为 B</dd>
<dd><code>channelName</code> - channelName 要删除的会话 ID</dd>
<dd><code>channelType</code> - channelType 会话类型。chat:单聊会话；groupchat:群聊会话</dd>
<dd><code>deleteRoam</code> - deleteRoam 是否删除服务端消息，不允许为空。true：是；false：否</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>消息撤回响应或错误</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="https://docs-im.easemob.com/ccim/rest/message#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%8D%95%E5%90%91%E5%88%A0%E9%99%A4%E4%BC%9A%E8%AF%9D">服务端单向删除会话</a></dd>
</dl>
</li>
</ul>
<a name="importMessage--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>importMessage</h4>
<pre>public&nbsp;<a href="../../../../../../com/easemob/im/server/api/message/upload/ImportMessage.html" title="com.easemob.im.server.api.message.upload中的类">ImportMessage</a>&nbsp;importMessage()</pre>
<div class="block">构造消息并导入。
 <p>
 例如，导入一条带有扩展字段的单聊文本消息:
 <pre><code>
 EMService service;
 try {
     service.message().importMessage()
                      .from("alice")
                      .toUser("rabbit")
                      .text(msg -&gt; msg.text("hello"))
                      .extension(exts -&gt; exts.add(EMKeyValue.of("timeout", 1)))
                      .isAckRead(true)
                      .msgTimestamp(Instant.now().toEpochMilli())
                      .needDownload(true)
                      .importChatMessage()
                      .block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }
 </code></pre>

 <p>
 如果需要向一个群组导入消息，将示例中的 toUser 改成 toGroup，并传入对应的群组或聊天室id
 <p>
 将上述发送文本消息示例中的 `.text(...) `替换掉，来发送其他类型消息示例：
 <p>
 导入图片消息：<code>.image(msg -&gt; msg.uri(URI.create("http://example/image.png")).secret("secret").displayName("image.png"))</code>
 <p>
 导入语音消息：<code>.voice(msg -&gt; msg.uri(URI.create("http://example/voice.amr")).duration(3).secret("secret").displayName("voice.amr"))</code>
 <p>
 导入视频消息：<code>.video(msg -&gt; msg.uri(URI.create("http://example/video.mp4")).duration(3).secret("secret").displayName("video.mp4").thumb("http://example/videoThumbnail").thumbSecret("thumbSecret"))</code>
 <p>
 导入文件消息：<code>.file(msg -&gt; msg.uri(URI.create("http://example/file.txt")).secret("secret").displayName("file.txt"))</code>
 <p>
 导入位置消息：<code>.location(msg -&gt; msg.latitude(1.234567).longitude(1.234567).address("some where"))</code>
 <p>
 导入自定义类型消息：<code>.custom(msg -&gt; msg.customEvent("liked").customExtension("name", "forest"))</code>
 <p></div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>导入消息的构造器</dd>
</dl>
</li>
</ul>
<a name="importChatMessage-java.lang.String-java.lang.String-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.Boolean-java.lang.Long-java.lang.Boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>importChatMessage</h4>
<pre>public&nbsp;reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;importChatMessage(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;to,
                                                             <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;isAckRead,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="java.lang中的类或接口">Long</a>&nbsp;msgTimestamp,
                                                             <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;needDownload)</pre>
<div class="block">导入单聊消息

 API使用示例：
 <pre> <code>

 例如，导入带扩展字段的文本消息

 EMTextMessage textMessage = new EMTextMessage().text("hello");

 Set&lt;EMKeyValue&gt; exts = new HashSet&lt;&gt;();
 exts.add(EMKeyValue.of("key", "value"));

 try {
     Instant time = Instant.parse("2021-05-20T18:00:00.631Z").minusMillis((TimeUnit.HOURS.toMillis(8)));
     Long msgTimestamp = time.toEpochMilli();
     String messageId = service.message()
                               .importChatMessage("fromUserName", "toUserName",
                                  textMessage, exts, true, msgTimestamp, false)
                               .block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }

 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>from</code> - 发送者用户名</dd>
<dd><code>to</code> - 目标用户名</dd>
<dd><code>message</code> - 要导入的消息，EMTextMessage文本消息，EMImageMessage图片消息，EMVoiceMessage语音消息，
                   EMVideoMessage视频消息，EMFileMessage文件消息，EMCommandMessage透传消息，EMCustomMessage自定义类型消息，
                   各种类型消息需要自己构造</dd>
<dd><code>extensions</code> - 要导入的扩展内容，可以为空</dd>
<dd><code>isAckRead</code> - 是否设置消息为已读</dd>
<dd><code>msgTimestamp</code> - 导入的消息的时间戳</dd>
<dd><code>needDownload</code> - 是否需要下载附件资源</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>导入成功后消息的id</dd>
</dl>
</li>
</ul>
<a name="importChatGroupMessage-java.lang.String-java.lang.String-com.easemob.im.server.model.EMMessage-java.util.Set-java.lang.Boolean-java.lang.Long-java.lang.Boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>importChatGroupMessage</h4>
<pre>public&nbsp;reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&gt;&nbsp;importChatGroupMessage(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;from,
                                                                  <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;to,
                                                                  <a href="../../../../../../com/easemob/im/server/model/EMMessage.html" title="com.easemob.im.server.model中的类">EMMessage</a>&nbsp;message,
                                                                  <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html?is-external=true" title="java.util中的类或接口">Set</a>&lt;<a href="../../../../../../com/easemob/im/server/model/EMKeyValue.html" title="com.easemob.im.server.model中的类">EMKeyValue</a>&gt;&nbsp;extensions,
                                                                  <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;isAckRead,
                                                                  <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="java.lang中的类或接口">Long</a>&nbsp;msgTimestamp,
                                                                  <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;needDownload)</pre>
<div class="block">导入群聊消息

 API使用示例：
 <pre> <code>

 例如，导入带扩展字段的文本消息

 EMTextMessage textMessage = new EMTextMessage().text("hello");

 Set&lt;EMKeyValue&gt; exts = new HashSet&lt;&gt;();
 exts.add(EMKeyValue.of("key", "value"));

 try {
     Instant time = Instant.parse("2021-05-20T18:00:00.631Z").minusMillis((TimeUnit.HOURS.toMillis(8)));
     Long msgTimestamp = time.toEpochMilli();
     String groupId = "18273849454"
     String messageId = service.message()
                               .importChatGroupMessage("fromUserName", groupId,
                                  textMessage, exts, true, msgTimestamp, false)
                               .block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>from</code> - 发送者用户名</dd>
<dd><code>to</code> - 目标群id</dd>
<dd><code>message</code> - 要导入的消息，EMTextMessage文本消息，EMImageMessage图片消息，EMVoiceMessage语音消息，
                   EMVideoMessage视频消息，EMFileMessage文件消息，EMCommandMessage透传消息，EMCustomMessage自定义类型消息，
                   各种类型消息需要自己构造</dd>
<dd><code>extensions</code> - 要导入的扩展内容，可以为空</dd>
<dd><code>isAckRead</code> - 是否设置消息为已读</dd>
<dd><code>msgTimestamp</code> - 导入的消息的时间戳</dd>
<dd><code>needDownload</code> - 是否需要下载附件资源</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>导入成功后消息的id</dd>
</dl>
</li>
</ul>
<a name="oneWayClearUserAllRoamingMessage-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>oneWayClearUserAllRoamingMessage</h4>
<pre>public&nbsp;reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="java.lang中的类或接口">Void</a>&gt;&nbsp;oneWayClearUserAllRoamingMessage(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;username)</pre>
<div class="block">单向清空指定用户的漫游消息
 <p>
 清空指定用户当前时间及之前的所有漫游消息。
 清空后，该用户无法从服务端拉取到漫游消息，而且该用户的所有会话也会被清除，也拉不到会话列表。
 不过，其他用户不受影响，仍然可以拉取与该用户的漫游消息和会话。

 <p>
 API使用示例：
 <pre> <code>
 EMService service;
 try {
     service.message().oneWayClearUserAllRoamingMessage("username").block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>username</code> - 要清空哪个用户的漫游消息。需传入该用户的用户 ID。</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>Void</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="https://doc.easemob.com/document/server-side/message_roam_clear.html#%E5%8D%95%E5%90%91%E6%B8%85%E7%A9%BA%E6%8C%87%E5%AE%9A%E7%94%A8%E6%88%B7%E7%9A%84%E6%BC%AB%E6%B8%B8%E6%B6%88%E6%81%AF">单向清空指定用户的漫游消息</a></dd>
</dl>
</li>
</ul>
<a name="oneWayClearUserRoamingMessagesWithinPeriod-java.lang.String-java.lang.String-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>oneWayClearUserRoamingMessagesWithinPeriod</h4>
<pre>public&nbsp;reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="java.lang中的类或接口">Void</a>&gt;&nbsp;oneWayClearUserRoamingMessagesWithinPeriod(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;username,
                                                                                    <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;clearUser,
                                                                                    long&nbsp;time)</pre>
<div class="block">单向清空指定单聊会话一段时间内的漫游消息
 <p>
 清空后，该用户无法从服务端拉取到漫游消息，而且该用户的所有会话也会被清除，也拉不到会话列表。
 不过，其他用户不受影响，仍然可以拉取与该用户的漫游消息和会话。

 <p>
 API使用示例：
 <pre> <code>
 EMService service;
 try {
     service.message().oneWayClearUserRoamingMessagesWithinPeriod("username", "clearUser", 1659014868000).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>username</code> - 调用该接口的用户的用户 ID</dd>
<dd><code>clearUser</code> - 要清空与哪个用户的单聊会话的漫游消息。需传入该用户的用户 ID。</dd>
<dd><code>time</code> - 要清空哪个时间点及之前的单聊漫游消息。该时间为 Unix 时间戳，单位为毫秒</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>Void</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="https://doc.easemob.com/document/server-side/message_roam_clear.html#%E5%8D%95%E5%90%91%E6%B8%85%E7%A9%BA%E6%8C%87%E5%AE%9A%E5%8D%95%E8%81%8A%E4%BC%9A%E8%AF%9D%E4%B8%80%E6%AE%B5%E6%97%B6%E9%97%B4%E5%86%85%E7%9A%84%E6%BC%AB%E6%B8%B8%E6%B6%88%E6%81%AF">单向清空指定单聊会话一段时间内的漫游消息</a></dd>
</dl>
</li>
</ul>
<a name="oneWayClearGroupOrRoomRoamingMessagesWithinPeriod-java.lang.String-java.lang.String-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>oneWayClearGroupOrRoomRoamingMessagesWithinPeriod</h4>
<pre>public&nbsp;reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="java.lang中的类或接口">Void</a>&gt;&nbsp;oneWayClearGroupOrRoomRoamingMessagesWithinPeriod(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;username,
                                                                                           <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;id,
                                                                                           long&nbsp;time)</pre>
<div class="block">单向清空指定群组或聊天室会话一段时间内的漫游消息
 <p>
 清空后，该用户无法从环信服务端拉取到这些漫游消息。若清除了该会话的全部漫游消息，该用户的这个会话在服务端也会被清除，拉取会话列表时拉不到该会话。
 不过，其他用户不受影响，仍然可以拉取这些漫游消息和会话。

 <p>
 API使用示例：
 <pre> <code>
 EMService service;
 try {
     service.message().oneWayClearGroupOrRoomRoamingMessagesWithinPeriod("username", "227918582185992", 1659014868000).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>username</code> - 调用该接口的用户的用户 ID</dd>
<dd><code>id</code> - 要清空哪个群组或聊天室的漫游消息。你可以传入群组 ID 或聊天室 ID。</dd>
<dd><code>time</code> - 要清空哪个时间点及之前的群组或聊天室的漫游消息。该时间为 Unix 时间戳，单位为毫秒。</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>Void</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="https://doc.easemob.com/document/server-side/message_roam_clear.html#%E5%8D%95%E5%90%91%E6%B8%85%E7%A9%BA%E6%8C%87%E5%AE%9A%E7%BE%A4%E7%BB%84%E6%88%96%E8%81%8A%E5%A4%A9%E5%AE%A4%E4%BC%9A%E8%AF%9D%E4%B8%80%E6%AE%B5%E6%97%B6%E9%97%B4%E5%86%85%E7%9A%84%E6%BC%AB%E6%B8%B8%E6%B6%88%E6%81%AF">单向清空指定群组或聊天室会话一段时间内的漫游消息</a></dd>
</dl>
</li>
</ul>
<a name="modifyTextOrCustomMessage-java.lang.String-java.lang.String-com.easemob.im.server.api.message.modify.NewMessage-java.util.Map-java.lang.Boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>modifyTextOrCustomMessage</h4>
<pre>public&nbsp;reactor.core.publisher.Mono&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="java.lang中的类或接口">Void</a>&gt;&nbsp;modifyTextOrCustomMessage(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;messageId,
                                                                   <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>&nbsp;username,
                                                                   <a href="../../../../../../com/easemob/im/server/api/message/modify/NewMessage.html" title="com.easemob.im.server.api.message.modify中的类">NewMessage</a>&nbsp;newMessage,
                                                                   <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="java.util中的类或接口">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a>,<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="java.lang中的类或接口">Object</a>&gt;&nbsp;newExt,
                                                                   <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="java.lang中的类或接口">Boolean</a>&nbsp;isCombineExt)</pre>
<div class="block">修改文本或自定义消息，若使用该功能，需联系环信商务开通。

 <p>
 API使用示例：
 <pre> <code>
 EMService service;
 try {
     NewMessage newMessage = NewMessage.builder()
             .type("txt")
             .msg("hello world")
             .build();

     Map&lt;String, Object&gt; newExt = new HashMap&lt;&gt;();
     newExt.put("key", "value");

     service.message().modifyTextOrCustomizeMessage("messageId", "username", newMessage, newExt, true).block();
 } catch (EMException e) {
     e.getErrorCode();
     e.getMessage();
 }
 </code></pre></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>messageId</code> - 要修改的消息的 ID。</dd>
<dd><code>username</code> - 修改消息的用户 ID。</dd>
<dd><code>newMessage</code> - 修改后的消息。</dd>
<dd><code>newExt</code> - 修改后的消息扩展信息。</dd>
<dd><code>isCombineExt</code> - 修改后的消息扩展信息与原有扩展信息是合并还是替换。- （默认）true：合并；- false：替换。</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>Void</dd>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="https://doc.easemob.com/document/server-side/message_modify_text_custom.html">修改文本或自定义消息</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="class-use/MessageApi.html">使用</a></li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../../index-all.html">索引</a></li>
<li><a href="../../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../com/easemob/im/server/api/message/ChatroomMsgLevel.html" title="com.easemob.im.server.api.message中的枚举"><span class="typeNameLink">上一个类</span></a></li>
<li><a href="../../../../../../com/easemob/im/server/api/message/RouteType.html" title="com.easemob.im.server.api.message中的枚举"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/easemob/im/server/api/message/MessageApi.html" target="_top">框架</a></li>
<li><a href="MessageApi.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li>嵌套&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2024. All rights reserved.</small></p>
</body>
</html>
